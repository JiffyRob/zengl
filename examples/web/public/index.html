<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
<script src="python.js"></script>
<script>
  runPython(`
    import js
    import pyodide_js
    import zengl

    canvas = js.document.createElement('canvas')
    canvas.id = 'canvas'
    canvas.width = 600
    canvas.height = 400

    canvas.style.position = 'fixed'
    canvas.style.left = '50%'
    canvas.style.top = '50%'
    canvas.style.transform = 'translate(-50%, -50%)'

    options = js.Object.new()
    options.powerPreference = 'high-performance'
    options.premultipliedAlpha = False
    options.antialias = False
    options.alpha = False
    options.depth = False
    options.stencil = False

    gl = canvas.getContext('webgl2', options)
    canvas = js.document.body.appendChild(canvas)

    setup_gl = js.eval(zengl.setup_gl)
    setup_gl(pyodide_js._module, gl)

    ctx = zengl.context()

    from zengl_logo import Logo

    logo = Logo(size=(600, 400), samples=16)
    logo.render()

    resolved = ctx.image((600, 400), 'rgba8unorm', texture=False)
    logo.image.blit(resolved)
    resolved.blit()
  `);
</script>
</html>
